using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Remoting.Contexts;
using System.Security.Cryptography.X509Certificates;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ConcurrencyTEST
{
    class Program
    {
        static void Main(string[] args)
        {
            long[] arr =
            {
                54795156375827
                ,29161491432419
                ,21002057085480
                ,96006993576825
                ,54214017210513
                ,78178744788336
                ,54714138018877
                ,62491805685181
                ,20768541802678
                ,75479109339892
                ,44812071495188
                ,65449591260223
                ,76254078133190
                ,29881698173838
                ,44694778591359
                ,49202299499850
                ,78721381892242
                ,91222355682845
                ,91675997217489
                ,80497489262189
                ,44317596655587
                ,13539815511488
                ,20743801803583
                ,77560009151418
                ,38843554834230
                ,97454284704724
                ,47237524595464
                ,28868643260416
                ,84095123556493
                ,78221497099223
                ,33470899612461
                ,46518442580371
                ,60539033845230
                ,19352769654550
                ,10840164803239
                ,29945714476360
                ,23696519703185
                ,13279249776228
                ,39252595567048
                ,81583918758086
                ,81618916791450
                ,16464459710150
                ,64015959051912
                ,31209915235929
                ,92809061791406
                ,73777756387797
                ,83257045902470
                ,92958754478331
                ,39638449435968
                ,57799739475404
                ,59272091195182
                ,83538875506584
                ,51182544261520
                ,73918891133861
                ,50743654802024
                ,43062506017322
                ,23377406260247
                ,18559073955556
                ,27733478800078
                ,28515975852612
                ,85527082178133
                ,17014358190487
                ,81083813201654
                ,60872454605262
                ,69484012459842
                ,78629669267193
                ,74068107193329
                ,66636408445003
                ,20124452885035
                ,44034212766801
                ,93304505701479
                ,39842582051496
                ,35811174350936
                ,92727811649329
                ,85428113947449
                ,92326667804991
                ,14860911127640
                ,84609617112884
                ,25993133751249
                ,30457909311219
                ,68830495602544
                ,59616047140671
                ,37113215109054
                ,72718813931587
                ,96675444100690
                ,12991562233898
                ,59217824093577
                ,40367471986460
                ,91242033541037
                ,24754455906708
                ,50268599877778
                ,90795183958488
                ,78910566445666
                ,23601031792502
                ,37140259115655
                ,71237081779338
                ,58811312336303
                ,40816665755680
                ,70778419215486
                ,47721598988760
                ,53203833311796
                //,11148873747132
                //,36743375639508
                //,73867669924925
                //,74671116969021
                //,88847858421502
                //,59200214049781
                //,34024581891962
                //,39787266520619
                //,48607528827974
                //,39358149941224
                //,21743175887776
                //,75476775374226
                //,11713367362156
                //,48582705720905
                //,41099672453472
                //,51992513470780
                //,72959203122034
                //,65961533913202
                //,58229783133485
                //,51320806301981
                //,23139886044223
                //,79610343714344
                //,80345663162852
                //,67668538511072
                //,45311403127136
                //,70680842511111
                //,65739611869078
                //,59076576521259
                //,42828461886399
                //,74626846462952
                //,50172577641650
                //,58043214024684
                //,80404668490769
                //,46855431170525
                //,54423302563674
                //,70994403229116
                //,12556352610942
                //,46463537690049
                //,40794441240049
                //,35454964332848
                //,84570241120875
                //,30070564046272
                //,56925592041697
                //,55302933674247
                //,29938159901020
                //,74438867408103
                //,21091894047104
                //,50284191643325
                //,81473128742394
                //,81237845876885
                //,91047848144262
            };

            IEnumerable<long> cores = new List<long>
            {
                1,2,3,4
            };

            Parallel.ForEach(cores, x =>
            {
                TEST();
            });

            Console.WriteLine($"끝");
            Console.ReadLine();
        }

        static void TEST()
        {
            int returnCode = 0;
            using(var context = new WZMobileUserDataContext("Data Source=10.3.0.9,16279;Initial Catalog=WZMobileUser;User ID=PlatformID;Password=s#_avs1a"))
            {
                var result = context.USP_MAPI_RegisterGameAccountByPINID("SVC001", "53203833311796", "1.1.1.1");
                returnCode = (int)result.ReturnValue;
            }

            Console.WriteLine($"ReturnCode : {returnCode}, Time : {DateTime.Now.Ticks}, {DateTime.Now.ToString("HH:mm:ss.fff")}");
        }
    }
}

